<!DOCTYPE html>
<html>
<head>
  <title>D3.js Scatter Plot</title>
  <script src='https://d3js.org/d3.v5.min.js'></script>
  <style>
    /* Add any CSS styles here, if needed */
  </style>
</head>
<body>
  <svg id="scatterplot"></svg>

  <script>
    async function init() {
      const data = await d3.csv('https://flunky.github.io/cars2017.csv');

      // Get the screen dimensions
      const screenWidth = window.innerWidth;
      const screenHeight = window.innerHeight;

      // Set some padding values to avoid the edges of the screen
      const margin = { top: 50, right: 50, bottom: 50, left: 50 };
      const width = screenWidth - margin.left - margin.right;
      const height = screenHeight - margin.top - margin.bottom;

      // Create the SVG element
      var svg = d3.select("#scatterplot")
                  .attr("width", width + margin.left + margin.right)
                  .attr("height", height + margin.top + margin.bottom)
                  .append("g")
                  .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

      var xScale = d3.scaleLog()
                     .domain(d3.extent(data, function(d) { return +d.AverageHighwayMPG; }))
                     .range([0, width]);

      var yScale = d3.scaleLog()
                     .domain(d3.extent(data, function(d) { return +d.AverageCityMPG; }))
                     .range([height, 0]);

      svg.selectAll("circle")
         .data(data)
         .enter()
         .append("circle")
         .attr("cx", function(d) { return xScale(+d.AverageHighwayMPG); })
         .attr("cy", function(d) { return yScale(+d.AverageCityMPG); })
         .attr("r", 5);
    }

    init();
  </script>
</body>
</html>
